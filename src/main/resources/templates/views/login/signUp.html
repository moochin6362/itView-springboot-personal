<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>íšŒì›ê°€ì…</title>
	<link href="/css/login/signUp.css" rel="stylesheet" type="text/css" />
	<!-- Flatpickr CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<!-- Flatpickr JS -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<!-- Flatpickr í•œêµ­ì–´ -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
	<!-- ì¹´ì¹´ì˜¤ ì£¼ì†Œê²€ìƒ‰ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
	<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	
</head>
<body>
  <div class="signup-container">
    <div class="logo">
      <h1>it:view</h1>
    </div>

    <form id="signup" action="/login/signUp" method="post">
    	<input type="hidden" name="userType" id="userType" value="U">
    	<div class="toggle-buttons">
      		<button type="button" id="memberBtn" class="active">íšŒì›ì „ìš©</button>
      		<button type="button" id="sellerBtn">íŒë§¤ìì „ìš©</button>
    	</div>
      <!-- íšŒì›ìš© ì•„ì´ë”” -->
      <div class="form-group" id="member-field">
        <label id="userIdLabel" for="userId">ì•„ì´ë””</label>
        <input type="text" id="userId" name="userId" placeholder="ì•„ì´ë”” ì…ë ¥ (6 ~ 20ì)" required/>
        <label id="idCheckResult"></label>
      </div>

      <!-- ë¹„ë°€ë²ˆí˜¸ -->
      <div class="form-group">
        <label for="userPassword">ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" id="userPassword" name="userPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ê¸°í˜¸ í¬í•¨ 6 ~ 20ì)" required/>
      </div>

      <div class="form-group">
        <label for="passwordConfirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
        <input type="password" id="passwordConfirm" name="passwordConfirm" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required/>
        <label id="passwordCheckResult"></label>
      </div>
      
      <!-- íŒë§¤ììš© ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ -->
      <div class="form-group" id="seller-field">
        <label for="brandName">ë¸Œëœë“œëª…</label>
        <input type="text" id="brandName" name="brandName" placeholder="ë¸Œëœë“œëª… ì…ë ¥" />
      </div>

      <!-- ì´ë¦„ -->
      <div class="form-group">
        <label for="userName">ì´ë¦„</label>
        <input type="text" id="userName" name="userName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
      </div>

	  <!-- ìƒë…„ì›”ì¼ -->
      <div class="form-group">
        <label>ìƒë…„ì›”ì¼</label>
        <input type="text" id="userAge" name="userAge" placeholder="ìƒë…„ì›”ì¼ ì…ë ¥">
      </div>
      
      <!-- íœ´ëŒ€ì „í™” -->
      <div class="form-group">
        <label for="userPhone">ì „í™”ë²ˆí˜¸</label>
        <input type="text" id="userPhone" name="userPhone" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥" />
        
      </div>

      <!-- ì´ë©”ì¼ -->
      <div class="form-group">
        <label for="email">ì´ë©”ì¼</label>
        <input type="text" id="email" name="email" placeholder="ì´ë©”ì¼ ì…ë ¥" />
        <button type="button" class="btn-verify">ì¸ì¦ë²ˆí˜¸</button>
      </div>
      
      <div class="form-group" style="display: none;">
        <label for="emailConfirm">ì¸ì¦ë²ˆí˜¸ í™•ì¸</label>
        <input type="text" id="emailConfirm" name="emailConfirm" placeholder="ì¸ì¦ë²ˆí˜¸ ì…ë ¥" required/>
        <label id="emailCheckResult"></label>
      </div>
      
      <!-- ì£¼ì†Œ -->
      <div class="form-group">
<!--       	<label for="userPost">ìš°í¸ë²ˆí˜¸</label> -->
<!--   		<input type="text" id="userPost" name="userPost" readonly> -->
        <label for="userAddress">ì£¼ì†Œ</label>
  		<input type="text" id="userAddress" name="userAddress" placeholder="ì£¼ì†Œ ê²€ìƒ‰" readonly>
  		<button type="button" class="btn-verify" onclick="searchAddress()">ì£¼ì†Œ ê²€ìƒ‰</button>
      </div>

      <!-- ì„±ë³„ -->
      <div class="form-group">
        <label for="userGender">ì„±ë³„</label>
        <div class="chip-group single">
          <input type="radio" id="male" name="userGender" value="M" />
          <label for="male" class="chip">ë‚¨ì</label>

          <input type="radio" id="female" name="userGender" value="F" />
          <label for="female" class="chip">ì—¬ì</label>

        </div>
      </div>
      
      <!-- í”¼ë¶€íƒ€ì… -->
        <div class="form-group">
          <label for="skinType">í”¼ë¶€íƒ€ì…</label>
          <div class="chip-group single" id="skinType">
            <input type="radio" id="skinDry" name="skinType" value="dry" />
            <label for="skinDry" class="chip">ê±´ì„±</label>

            <input type="radio" id="skinOily" name="skinType" value="oily" />
            <label for="skinOily" class="chip">ì§€ì„±</label>

            <input type="radio" id="skinCombination" name="skinType" value="combination" />
            <label for="skinCombination" class="chip">ë³µí•©ì„±</label>

            <input type="radio" id="skinSensitive" name="skinType" value="sensitive" />
            <label for="skinSensitive" class="chip">ë¯¼ê°ì„±</label>

            <input type="radio" id="oilDry" name="skinType" value="oilDry" />
            <label for="oilDry" class="chip">ìˆ˜ë¶€ì§€</label>
          </div>
        </div>

		<section class="tip-banner">
			<div class="tip-text">
				ìì„¸í•œ ì •ë³´ë¥¼ ë§ì´ ì…ë ¥í• ìˆ˜ë¡<br />
				ë‚˜ì—ê²Œ ë§ëŠ” ì œí’ˆì¼ í™•ë¥ ì´ ì˜¬ë¼ê°€ìš”
			</div>
			<div class="tip-illust" aria-hidden="true">ğŸ’¬ğŸ“ˆ</div>
		</section>
      <!-- ì¶”ê°€ì •ë³´ í† ê¸€ ë²„íŠ¼ -->
      <button type="button" class="toggle-additional">ì¶”ê°€ì •ë³´ ì…ë ¥í•˜ê¸°</button>

      <!-- ì¶”ê°€ì •ë³´ ì˜ì—­ -->
      <div class="additional-info">
        <!-- í¼ìŠ¤ë„ ì»¬ëŸ¬ -->
        <div class="form-group">
          <label for="personalColor">í¼ìŠ¤ë„ ì»¬ëŸ¬</label>
          <div class="chip-group single" id="personalColor">
            <input type="radio" id="pcSpring" name="personalColor" value="spring" />
            <label for="pcSpring" class="chip">ë´„ ì›œí†¤</label>

            <input type="radio" id="pcSummer" name="personalColor" value="summer" />
            <label for="pcSummer" class="chip">ì—¬ë¦„ ì¿¨í†¤</label>

            <input type="radio" id="pcAutumn" name="personalColor" value="autumn" />
            <label for="pcAutumn" class="chip">ê°€ì„ ì›œí†¤</label>

            <input type="radio" id="pcWinter" name="personalColor" value="winter" />
            <label for="pcWinter" class="chip">ê²¨ìš¸ ì¿¨í†¤</label>
          </div>
        </div>

        <!-- í”¼ë¶€ ê³ ë¯¼ -->
        <div class="form-group">
          <label for="skinTrouble">í”¼ë¶€ ê³ ë¯¼</label>
          <div class="chip-group multiple" id="skinTrouble">
            <input type="checkbox" id="concernWhitening" name="skinTrouble" value="whitening" />
            <label for="concernWhitening" class="chip">ë¯¸ë°±/ì¡í‹°</label>

            <input type="checkbox" id="concernSebum" name="skinTrouble" value="sebum" />
            <label for="concernSebum" class="chip">í”¼ì§€/ë¸”ë™í—¤ë“œ</label>

            <input type="checkbox" id="concernDry" name="skinTrouble" value="dry" />
            <label for="concernDry" class="chip">ì†ê±´ì¡°</label>

            <input type="checkbox" id="concernWrinkle" name="skinTrouble" value="wrinkle" />
            <label for="concernWrinkle" class="chip">ì£¼ë¦„/íƒ„ë ¥</label>

            <input type="checkbox" id="concernDeadskin" name="skinTrouble" value="deadskin" />
            <label for="concernDeadskin" class="chip">ê°ì§ˆ</label>
          </div>
        </div>
        
      	<!-- ë‘í”¼/ëª¨ë°œ ê³ ë¯¼ -->
		<div class="form-group">
			<label for="headSkin">ë‘í”¼/ëª¨ë°œ ê³ ë¯¼</label>
			<div class="chip-group multiple" id="headSkin">
			    <input type="checkbox" id="concernHairLoss" name="headSkin" value="hairLoss" />
			    <label for="concernHairLoss" class="chip">íƒˆëª¨</label>
			
			    <input type="checkbox" id="concernDamagedHair" name="headSkin" value="damagedHair" />
			    <label for="concernDamagedHair" class="chip">ì†ìƒëª¨</label>
			
			    <input type="checkbox" id="concernHotScalp" name="headSkin" value="hotScalp" />
			    <label for="concernHotScalp" class="chip">ì—´ê°ë‘í”¼</label>
			
			    <input type="checkbox" id="concernOilyScalp" name="headSkin" value="oilyScalp" />
			    <label for="concernOilyScalp" class="chip">ì§€ì„±ë‘í”¼</label>
			
			    <input type="checkbox" id="concernDandruff" name="headSkin" value="dandruff" />
			    <label for="concernDandruff" class="chip">ë¹„ë“¬/ê°ì§ˆ</label>
			</div>
		</div>
      </div>
      <button type="submit" class="btn-submit">ê°€ì…í•˜ê¸°</button>
    </form>
  </div>

	<script>
		window.addEventListener('DOMContentLoaded', () => {
	
		    const userIdInput = document.getElementById('userId');
		    const idCheckLabel = document.getElementById('idCheckResult');
	
		    // ID ì…ë ¥ ë³€ê²½ ì‹œ ì²´í¬
		    userIdInput.addEventListener('change', () => {
		        const value = userIdInput.value.trim();
	
		        if(value === '') {
		            idCheckLabel.innerText = 'ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
		            idCheckLabel.style.color = 'black';
		            return;
		        }
	
		        $.ajax({
		            url: '/login/checkId',  // ì„œë²„ì—ì„œ ID ì¤‘ë³µ í™•ì¸
		            data: { userId: userIdInput.value.trim() },
		            success: data => {
		                if(data == 0){
		                    idCheckLabel.innerText = 'ì‚¬ìš© ê°€ëŠ¥í•œ IDì…ë‹ˆë‹¤.';
		                    idCheckLabel.style.color = 'green';
		                } else {
		                    idCheckLabel.innerText = "ì¤‘ë³µëœ IDì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.";
		                    idCheckLabel.style.color = 'red';
		                }
		            },
		            error: err => {
		                console.error(err);
		                idCheckLabel.innerText = "ì„œë²„ ì˜¤ë¥˜ ë°œìƒ";
		                idCheckLabel.style.color = 'red';
		            }
		        });
		    });
	
		});
		
		const passwordInput = document.getElementById('userPassword');
		const passwordConfirmInput = document.getElementById('passwordConfirm');
		const pwCheckLabel = document.getElementById('passwordCheckResult');

		// í™•ì¸ë€ ì…ë ¥ ì‹œ ì²´í¬
		passwordConfirmInput.addEventListener('input', () => {
		    const pwd = passwordInput.value;
		    const confirm = passwordConfirmInput.value;

		    if(confirm === '') {
		        pwCheckLabel.innerText = "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”";
		        pwCheckLabel.style.color = 'black';
		    } else if(pwd === confirm) {
		        pwCheckLabel.innerText = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤";
		        pwCheckLabel.style.color = 'green';
		    } else {
		        pwCheckLabel.innerText = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤";
		        pwCheckLabel.style.color = 'red';
		    }
		});
		
		// ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ë€ ë³€ê²½ ì‹œë„ ê°™ì´ ì²´í¬
		passwordInput.addEventListener('input', () => {
		    passwordConfirmInput.dispatchEvent(new Event('input'));
		});
	
	  	window.addEventListener('DOMContentLoaded', () => {
		    const memberBtn = document.getElementById('memberBtn');
		    const sellerBtn = document.getElementById('sellerBtn');
		    const memberField = document.getElementById('member-field');
		    const sellerField = document.getElementById('seller-field');
		    const userTypeInput = document.getElementById('userType');
		    const userIdLabel = document.getElementById('userIdLabel'); // <label> ì•„ì´ë”” í…ìŠ¤íŠ¸
		    const userIdInput = document.getElementById('userId');       // <input> ì‹¤ì œ ì…ë ¥ë€
		    
			memberBtn.classList.add('active');
			sellerBtn.classList.remove('active');
			memberField.style.display = 'block';
			sellerField.style.display = 'none';
			
			// íšŒì›/íŒë§¤ì ì „í™˜
		    memberBtn.addEventListener('click', () => {
		    	memberBtn.classList.add('active');
			    sellerBtn.classList.remove('active');
			    sellerField.style.display = 'none';
			    userTypeInput.value = 'U';
			    userIdLabel.innerText = 'ì•„ì´ë””'; // ì´ˆê¸° ë ˆì´ë¸”
			    userIdInput.placeholder = 'ì•„ì´ë”” ì…ë ¥';
		    });
	
		    sellerBtn.addEventListener('click', () => {
			    sellerBtn.classList.add('active');
			    memberBtn.classList.remove('active');
			    sellerField.style.display = 'block';
			    userTypeInput.value = 'P';
			    userIdLabel.innerText = 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸';
		        userIdInput.placeholder = 'ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ ì…ë ¥';
		    });
		});
	    
	  	// ìƒë…„ì›”ì¼
	    flatpickr("#userAge", {
	        dateFormat: "Ymd",   // ì¶œë ¥ í˜•ì‹ 
	        maxDate: "today",      // ë¯¸ë˜ ë‚ ì§œ ì„ íƒ ë¶ˆê°€
	        minDate: "1900-01-01", // ìµœì†Œ ì„ íƒ ê°€ëŠ¥ ë‚ ì§œ
	        locale: "ko"           // í•œêµ­ì–´ ì ìš©
	    });
	    
	    function searchAddress() {
    	  new daum.Postcode({
    	    oncomplete: function(data) {
    	      const addrInput = document.getElementById('userAddress');
    	      addrInput.value = data.address;    // ì£¼ì†Œ
    	    }
    	  }).open();
    	}
	    
	    // ì´ë©”ì¼ ì¸ì¦
	    window.onload = () => {
		    let confirmData = '';
		
		    // ì¸ì¦ ë©”ì¼ ë°œì†¡
		    document.querySelector('.btn-verify').addEventListener('click', function() {
		        const email = document.querySelector('#email').value.trim();
		
		        if (email === '') {
		            alert('ì´ë©”ì¼ì´ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
		            document.querySelector('#email').focus();
		        } else {
		            $.ajax({
		                url: '/login/echeck',
		                data: { email: email },
		                success: data => {
		                    alert('ì„±ê³µì ìœ¼ë¡œ ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
		                    
		                    // ìˆ¨ê²¨ì§„ ì¸ì¦ë²ˆí˜¸ ì…ë ¥ì°½ ë³´ì´ê¸°
		                    document.querySelector('#emailConfirm').parentElement.style.display = 'block';
		                    
		                    confirmData = data;
		                },
		                error: data => console.log(data)
		            });
		        }
		    });
		
		    // ì¸ì¦ë²ˆí˜¸ í™•ì¸ (blur ì´ë²¤íŠ¸ ë˜ëŠ” ì…ë ¥ ì™„ë£Œ í›„ ë²„íŠ¼ ëˆ„ë¥´ì§€ ì•Šì•„ë„ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ ìˆ˜ì • ê°€ëŠ¥)
		    document.querySelector('#emailConfirm').addEventListener('change', function() {
		        const verifyNum = this.value.trim();
		        const resultLabel = document.querySelector('#emailCheckResult');
		
		        if (verifyNum === '') {
		            alert("ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
		        } else if (confirmData === '') {
		            alert("ì´ë©”ì¼ ì¸ì¦ì„ ë¨¼ì € ì§„í–‰í•´ì£¼ì„¸ìš”");
		        } else {
		            if (verifyNum === confirmData) {
		                alert("ì´ë©”ì¼ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
		                this.disabled = true;
		                resultLabel.textContent = "ì¸ì¦ ì™„ë£Œ âœ…";
		                resultLabel.style.color = "green";
		            } else {
		                alert("ì¸ì¦ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
		                resultLabel.textContent = "ì¸ì¦ ì‹¤íŒ¨ âŒ";
		                resultLabel.style.color = "red";
		            }
		        }
		    });
		}

	    // ì¶”ê°€ì •ë³´ í† ê¸€
	    const toggleBtn = document.querySelector('.toggle-additional');
	    const additionalInfo = document.querySelector('.additional-info');
	
	    toggleBtn.addEventListener('click', () => {
		    if (additionalInfo.style.display === 'none' || additionalInfo.style.display === '') {
			    additionalInfo.style.display = 'block';
			    toggleBtn.textContent = 'ì¶”ê°€ì •ë³´ ìˆ¨ê¸°ê¸°';
		    } else {
			    additionalInfo.style.display = 'none';
			    toggleBtn.textContent = 'ì¶”ê°€ì •ë³´ ì…ë ¥í•˜ê¸°';
		    }
	    });
	    
	    function handleSubmit() {
	        alert("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
	        return true; // trueë¥¼ ë°˜í™˜í•˜ë©´ ì‹¤ì œë¡œ ì„œë²„ë¡œ í¼ ì œì¶œ
	      }
  </script>
</body>
</html>
